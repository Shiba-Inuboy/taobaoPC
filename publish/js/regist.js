"use strict";!function(){var a=$("#username"),s=$("#password"),r=$("#testPassword"),o=$("#usernameTips"),l=$("#passwordTips"),c=$("#testPasswordTips"),e=$("#submitBtn"),n=!1,i=!1;a.blur(function(){var e=a.val();""===e&&o.html("").css("");var t=/^1[3456789]\d{9}$/.test(e);o.html(t?"":"×手机号码格式错误").css(t?{color:""}:{color:"red"}),t?$.ajax({url:"../../php/checkusername.php",data:{username:e},type:"get",dataType:"json",success:function(e){e.error?(n=!1,o.html("×用户名已存在").css({color:"red"})):(n=!0,o.html("√用户名可以使用").css({color:"green"}))}}):n=!1}),s.blur(function(){var e=s.val();""===e&&l.html("").css("");var t=/^[0-9a-zA-Z]{6,24}$/g.test(e);l.html(t?"√密码可以使用":"×密码只能为6-24位的数字和字母").css(t?{color:"green"}:{color:"red"})}),s.focus(function(){r.val(""),c.html("")}),r.blur(function(){var e=s.val(),t=r.val();""===t&&testPasswordTips.html("").css("");if(!/^[0-9a-zA-Z]{6,24}$/g.test(t))return i=!1,void c.html("×密码只能为6-24位的数字和字母").css({color:"red"});c.html(e===t?"√两次密码相同":"×两次密码不一致！").css(e===t?{color:"green"}:{color:"red"}),i=e===t}),e.click(function(){if(n&&i){var e=a.val(),t=s.val();$.ajax({url:"../../php/regist.php",data:{username:e,password:t},type:"get",dataType:"json",success:function(e){e.error?(alert(e.msg),setTimeout(function(){location.href="../html/login.html"},500)):alert(e.msg)}})}else alert("请重新检查用户名或密码")});var t=$("#logina");if($.cookie("isLogin")){var m=JSON.parse(localStorage.getItem("username"));t.html('<a class="text-danger">'+m+'欢迎你</a><a class="data_btn">退出</a>')}$(".data_btn").click(function(){$.removeCookie("isLogin",{path:"/"}),alert("退出成功"),t.html('<a href="./web/html/login.html" class="activeColor">亲,请登录</a>\n    <a href="./web/html/regist.html">免费注册</a>'),localStorage.removeItem("username"),localStorage.removeItem("url"),location.href="./web/html/login.html"})}();