"use strict";!function(){var a=location.hash.slice(1),n=$("#content"),t=null;$.ajax({url:"../../php/detail.php",data:{shopId:a},type:"get",dataType:"json",success:function(a){t=a.data,n.html('\n            <figure class="figure col-4">\n            <div class="mirror-left">\n            <img style="width:350px;height:350px" src="'+a.data.goods_big_logo+'" alt="">\n            <div class="glass"></div>\n            </div>\n            <div class="mirror-right"><img style="width:800px;height:800px" src="'+a.data.goods_big_logo+'" alt=""></div>\n            <figcaption class="figure-caption text-left" style="margin-left:20px;">收藏宝贝</figcaption>\n            </figure>\n        <div class="col-8 cdetail">\n            <h3 class="detail-title">'+a.data.goods_name+'</h3>\n            <div class="d-flex justify-content-between align-items-center datail-price">\n                <div class="bgl">\n                    <span>价格</span>\n                    <strong>\n                        <i>￥</i>\n                        <i>'+a.data.goods_price+'</i>\n                    </strong>\n                </div>\n            </div>\n            <p class="discount"><span>优惠</span><span>淘金币可抵 <em>'+(Math.random()+1).toFixed(2)+'</em> 元</span></p>\n            <p class="distribution"><span>配送</span> <span>江苏南通</span> <i>至</i> <span>广东广州</span> <span>快递\n                    免运费</span> <i>付款后48小时内发货</i></p>\n            <p class="dnumber"><span>数量</span> <span>100件(库存'+a.data.goods_number+"件)</span></p>\n            <div class=\"pabtn\">\n                <button class=\"purchase\">立即购买</button>\n                <button class=\"addCart\">加入购物车</button>\n            </div>\n        </div>\n        <script>\n        var $glass = $('.glass');\n            var $mirrorLeft = $('.mirror-left');\n            var $mirrorRight = $('.mirror-right');\n            var $mirrorRightImg = $('.mirror-right img');\n            $mirrorLeft.mouseenter(function(){\n                $glass.show();\n                $mirrorRight.show();\n            })\n            $mirrorLeft.mousemove(function(e){\n                var x = e.pageX - $mirrorLeft.offset().left - $glass.width() / 2;\n                var y = e.pageY - $mirrorLeft.offset().top - $glass.width() / 2;\n                var maskMax = $mirrorLeft.width() - $glass.width();\n                var bigpicMax = $mirrorRightImg.width() - $mirrorRight.width();\n                if (x < 0) {\n                    x = 0;\n                } else if (x > maskMax) {\n                    x = maskMax\n                }\n                if (y < 0) {\n                    y = 0;\n                } else if (y > maskMax) {\n                    y = maskMax\n                }\n                $glass.css({\n                    left: x,\n                    top: y\n                })\n                $mirrorRightImg.css({\n                    left: -x / (maskMax / bigpicMax),\n                    top: -y / (maskMax / bigpicMax)\n                })\n            })\n            $mirrorLeft.mouseleave(function(){\n                $glass.hide();\n                $mirrorRight.hide();\n            })\n        <\/script>\n            ")}}),n.on("click",".addCart",function(){var a=JSON.parse(localStorage.getItem("cart"))||[];console.log(a);var n=a.find(function(a){return a.goods_id===t.goods_id});n?n.cart_number++:(t.cart_number=1,a.push(t)),localStorage.setItem("cart",JSON.stringify(a)),location.href="./shopping.html"});var i=$("#logina");if($.cookie("isLogin")){var s=JSON.parse(localStorage.getItem("username"));i.html('<a class="text-danger">'+s+'欢迎你</a><a class="data_btn">退出</a>')}$(".data_btn").click(function(){$.removeCookie("isLogin",{path:"/"}),alert("退出成功"),i.html('<a href="./web/html/login.html" class="activeColor">亲,请登录</a>\n    <a href="./web/html/regist.html">免费注册</a>'),localStorage.removeItem("username"),localStorage.removeItem("url"),location.href="./login.html"})}();